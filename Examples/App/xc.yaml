# xc configuration for SampleApp
# Generated workspace: SampleApp.xcworkspace (via tuist generate)

workspace: SampleApp.xcworkspace

# Named destinations — use env vars for CI flexibility
destinations:
  sim: "platform=iOS Simulator,name=${IOS_SIMULATOR:-iPhone 17 Pro}"
  sim-ipad: "platform=iOS Simulator,name=iPad Pro 13-inch (M5)"
  mac: "platform=macOS"

# Defaults applied to all commands
defaults:
  scheme: SampleApp
  configuration: Debug
  destination: sim

# Command definitions
commands:
  build:
    hooks:
      pre: "echo '==> Building SampleApp...'"
      post: "echo '==> Build finished.'"
    variants:
      release:
        configuration: Release
      ipad:
        destination: sim-ipad
      core:
        scheme: Core

  test:
    hooks:
      pre: "echo '==> Running tests...'"
    variants:
      core:
        scheme: Core
      coverage:
        extra-args:
          - "-enableCodeCoverage"
          - "YES"

  clean: {}

  archive:
    configuration: Release
    archive-path: "${BUILD_DIR:-./build}/SampleApp.xcarchive"
    hooks:
      pre: "echo '==> Archiving SampleApp...'"
      post: "echo '==> Archive complete.'"

  # Script commands — run arbitrary shell commands
  generate:
    run: "tuist generate"
    hooks:
      pre: "echo '==> Generating project...'"

  lint:
    run: "swiftlint lint --quiet"
    variants:
      fix:
        run: "swiftlint lint --fix"

  loc:
    run: "find Sources -name '*.swift' | xargs wc -l | tail -1"
