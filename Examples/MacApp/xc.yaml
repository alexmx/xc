# xc configuration for SampleMacApp

workspace: SampleMacApp.xcworkspace

destinations:
  mac: "platform=macOS"
  rosetta: "platform=macOS,arch=x86_64"

defaults:
  scheme: SampleMacApp
  configuration: Debug
  destination: mac

commands:
  build:
    hooks:
      pre: "tuist generate --no-open"
    variants:
      release:
        configuration: Release
      rosetta:
        destination: rosetta
      core:
        scheme: Core

  test:
    scheme: SampleMacAppTests
    variants:
      core:
        scheme: CoreTests
      ci:
        result-bundle-path: "${RESULT_BUNDLE_PATH:-./build/tests.xcresult}"
        extra-args:
          - "-enableCodeCoverage"
          - "YES"

  clean: {}

  archive:
    configuration: Release
    archive-path: "${BUILD_DIR:-./build}/SampleMacApp.xcarchive"

  lint:
    run: "swiftlint lint --quiet"
    variants:
      fix:
        run: "swiftlint lint --fix"

settings:
  formatter: "xcbeautify --disable-logging"
